<nav class="sidebar bg-white">
  <div class="sidebar-wrapper">
    <!-- Conteúdo do Sidebar -->
    <div class="sidebar-content">
      <!-- Logo -->
      <div class="sidebar-logo py-4 px-3">
        <div class="d-flex justify-content-between align-items-center">
          <a href="#" class="text-decoration-none">
            <i class="bi bi-heart-pulse text-primary me-2"></i>
            <span class="text-dark fs-5 fw-bold">Cuidar+</span>
          </a>
          <button class="btn btn-link text-dark d-md-none" (click)="onToggleSidebar()">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      </div>

      <!-- Menu de navegação -->
      <ul class="sidebar-menu list-unstyled ps-0 pt-2">
        <!-- Itens do menu -->
        <li class="sidebar-item mb-1" *ngFor="let item of menuItems">
          <a 
            [routerLink]="item.subItems?.length ? null : item.route"
            [class.active]="item.active"
            [class.disabled]="item.inConstruction"
            class="sidebar-link d-flex align-items-center px-3 py-2 text-decoration-none"
            (click)="toggleMenuItem(item)"
          >
            <i [class]="item.icon + ' me-3 text-primary'" aria-hidden="true"></i>
            <span>{{ item.title }}</span>
            
            <!-- Indicator de item em construção -->
            <span class="badge bg-warning text-dark rounded-pill ms-auto" *ngIf="item.inConstruction">Em breve</span>
            
            <!-- Indicador de dropdown para itens com subitens -->
            <i 
              *ngIf="item.subItems?.length" 
              class="bi ms-auto" 
              [ngClass]="item.expanded ? 'bi-chevron-down' : 'bi-chevron-right'"
            ></i>
          </a>

          <!-- Subitens (dropdown) -->
          <div *ngIf="item.subItems?.length" class="collapse" [class.show]="item.expanded">
            <ul class="sidebar-submenu list-unstyled ms-4 my-1">
              <li *ngFor="let subItem of item.subItems" class="sidebar-subitem">
                <!-- Submenu com subitems adicionais -->
                <ng-container *ngIf="subItem.subItems?.length">
                  <a 
                    href="#" 
                    class="sidebar-sublink d-flex align-items-center px-3 py-2 text-decoration-none"
                    [class.active]="subItem.active"
                    (click)="toggleSubMenu($event, subItem)"
                  >
                    <i *ngIf="subItem.icon" [class]="subItem.icon + ' me-2 text-primary-lighter'" aria-hidden="true"></i>
                    <span>{{ subItem.title }}</span>
                    <i class="bi ms-auto" [ngClass]="subItem.expanded ? 'bi-chevron-down' : 'bi-chevron-right'"></i>
                  </a>
                  
                  <!-- Nível 3 (subitems aninhados) -->
                  <div class="collapse" [class.show]="subItem.expanded">
                    <ul class="sidebar-submenu list-unstyled ms-4 my-1">
                      <li *ngFor="let nestedItem of subItem.subItems" class="sidebar-subitem">
                        <a 
                          [routerLink]="nestedItem.route" 
                          class="sidebar-sublink d-flex align-items-center px-3 py-1 text-decoration-none"
                          [class.active]="nestedItem.active"
                        >
                          <i *ngIf="nestedItem.icon" [class]="nestedItem.icon + ' me-2 text-primary-lighter'" aria-hidden="true"></i>
                          <span>{{ nestedItem.title }}</span>
                        </a>
                      </li>
                    </ul>
                  </div>
                </ng-container>
                
                <!-- Submenu sem subitems adicionais -->
                <a 
                  *ngIf="!subItem.subItems?.length"
                  [routerLink]="subItem.route" 
                  class="sidebar-sublink d-flex align-items-center px-3 py-2 text-decoration-none"
                  [class.active]="subItem.active"
                >
                  <i *ngIf="subItem.icon" [class]="subItem.icon + ' me-2 text-primary-lighter'" aria-hidden="true"></i>
                  <span>{{ subItem.title }}</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
    
    <!-- Overlay para dispositivos móveis -->
    <div class="sidebar-overlay" *ngIf="showOverlay" (click)="onToggleSidebar()"></div>
  </div>
</nav>